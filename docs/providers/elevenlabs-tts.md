# ElevenLabs TTS 配置指南

## 概述

ElevenLabs 提供业界领先的高质量语音合成服务，以其自然度和情感表达能力著称。PyVideoTrans 支持 ElevenLabs 作为语音合成渠道。

- **适用场景**：高质量、自然语音合成
- **TTS 渠道编号**：9
- **特点**：语音质量极高、支持情感表达、多语言支持

## 准备工作

### 1. 注册 ElevenLabs 账户

1. 访问 [ElevenLabs 官网](https://elevenlabs.io/)
2. 注册账户并验证邮箱
3. 在账户设置中获取 API Key

### 2. 了解计费模式

- **免费层**：每月有一定免费使用量
- **付费层**：提供更高配额和更多功能
- **按字符计费**：根据合成的字符数量收费

### 3. 语音库选择

ElevenLabs 提供丰富的语音选择：
- 预训练语音：多种语言和风格的语音
- 自定义语音：支持上传音频创建自定义语音
- 语音克隆：基于少量音频创建个性化语音

## 在 PyVideoTrans 中的配置

### GUI 配置

1. 打开 PyVideoTrans 设置
2. 选择 "配音/语音合成" → "Elevenlabs.io"（渠道编号：9）
3. 填写以下信息：
   - **API Key**：ElevenLabs API 密钥
   - **语音角色**：选择 ElevenLabs 支持的语音名称或 ID

### API 调用示例

```json
POST /tts
{
  "name": "C:/videos/sample.srt",
  "tts_type": 9,
  "voice_role": "Rachel",
  "target_language_code": "en"
}
```

## 支持的语音角色

ElevenLabs 提供多种高质量的语音选择：

### 英语语音
- `Rachel` - 瑞秋（女性，通用）
- `Domi` - 多米（女性，活泼）
- `Bella` - 贝拉（女性，温暖）
- `Antoni` - 安东尼（男性，专业）
- `Elli` - 艾莉（女性，清晰）
- `Josh` - 乔什（男性，深沉）
- `Arnold` - 阿诺德（男性，有力）
- `Adam` - 亚当（男性，自然）
- `Sam` - 山姆（男性，友好）

### 多语言支持
- 英语、中文、日语、德语、法语、西班牙语、意大利语等

## 高级功能

### 1. 语音参数调节

ElevenLabs 支持精细的语音参数调节：

- **稳定性**：控制语音的稳定性（0-100）
- **相似度增强**：提高语音与原始声音的相似度
- **风格夸张度**：调节语音的情感表达强度

### 2. 输出格式

支持多种音频格式：
- `mp3`（默认）
- `wav`
- `flac`
- `aac`

### 3. 语音克隆

Pro 版本支持语音克隆功能：
- 上传少量音频样本
- 创建个性化语音
- 保持语音特征一致性

## 常见问题与解决方案

### 1. 认证错误

**问题**：API Key 无效或过期
**解决方案**：
- 检查 API Key 是否正确
- 确认账户状态正常
- 重新生成 API Key

### 2. 配额不足

**问题**：月度字符配额已用完
**解决方案**：
- 等待下月重置或购买更多配额
- 优化合成内容，减少不必要合成
- 使用缓存机制避免重复合成

### 3. 语音选择失败

**问题**：选择的语音名称或 ID 不存在
**解决方案**：
- 从 ElevenLabs 控制台获取正确的语音名称
- 确认语音在当前账户下可用
- 尝试使用其他语音

### 4. 合成质量不佳

**问题**：合成的语音质量不理想
**解决方案**：
- 调整语音参数（稳定性、相似度等）
- 尝试不同的语音角色
- 检查文本内容的清晰度

## 成本优化建议

### 1. 合理使用免费配额

- 优先用于重要内容合成
- 避免合成重复内容
- 利用本地缓存机制

### 2. 批量处理优化

- 合并多个短句为较长的文本
- 减少 API 调用次数
- 利用上下文提高合成质量

### 3. 监控使用量

1. 定期检查 ElevenLabs 账户使用情况
2. 设置使用量预警
3. 优化合成策略

## 性能优化

### 1. 并发控制

- 合理设置并发请求数
- 避免超过 API 限制
- 实现请求队列管理

### 2. 错误处理

- 实现智能重试机制
- 记录失败请求
- 提供降级方案

### 3. 缓存策略

- 利用 PyVideoTrans 内置缓存
- 相同文本不会重复合成
- 定期清理缓存文件

## 与其他 TTS 服务的比较

| 特性 | ElevenLabs | Azure TTS | OpenAI TTS | Edge TTS |
|------|------------|-----------|------------|----------|
| 语音质量 | 极高 | 非常高 | 高 | 高 |
| 费用 | 按字符数 | 按使用量 | 按字符数 | 免费 |
| 语音选择 | 丰富 | 非常丰富 | 有限 | 丰富 |
| 情感表达 | 优秀 | 良好 | 良好 | 一般 |
| 配置复杂度 | 中等 | 中等 | 简单 | 简单 |

## 技术支持

### 官方资源

- [ElevenLabs API 文档](https://api.elevenlabs.io/docs)
- [ElevenLabs 控制台](https://elevenlabs.io/app)
- [语音库](https://elevenlabs.io/speech-synthesis)

### PyVideoTrans 支持

- [GitHub Issues](https://github.com/jianchang512/pyvideotrans/issues)
- [Discord 社区](https://discord.gg/y9gUweVCCJ)

---

ElevenLabs 提供业界领先的语音合成质量，适合对语音自然度和情感表达要求极高的场景。建议根据实际需求选择合适的配额和语音配置。